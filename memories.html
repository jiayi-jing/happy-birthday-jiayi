<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>æˆ‘ä»¬çš„å›å¿†</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
  -webkit-font-smoothing: antialiased;
}

html, body {
  height: 100%;
  overflow-x: hidden;
  font-family: "åæ–‡æ¥·ä½“", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
  background: linear-gradient(135deg, #fdfcfb 0%, #fff9f9 100%);
}

.container {
  min-height: 100%;
  padding: 20px 15px 80px;
  position: relative;
  max-width: 500px;
  margin: 0 auto;
}

/* æ ‡é¢˜æ ·å¼ */
.header {
  text-align: center;
  margin-bottom: 40px;
  padding-top: 20px;
}

.main-title {
  font-size: 28px;
  font-weight: 800;
  color: #ff758c;
  margin-bottom: 8px;
  letter-spacing: 2px;
  text-shadow: 0 2px 10px rgba(255, 117, 140, 0.2);
}

.sub-title {
  font-size: 16px;
  color: #666;
  font-weight: 300;
}

/* éŸ³ä¹æç¤ºåŒºåŸŸ */
.music-hint {
  text-align: center;
  margin: 30px auto;
  padding: 20px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 20px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
  max-width: 320px;
}

.music-icon {
  width: 70px;
  height: 70px;
  background: linear-gradient(135deg, #ff7eb3, #ff758c);
  border-radius: 50%;
  margin: 0 auto 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 8px 20px rgba(255, 117, 140, 0.3);
  transition: all 0.3s ease;
  position: relative;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.music-icon:hover {
  transform: scale(1.1);
  box-shadow: 0 10px 25px rgba(255, 117, 140, 0.4);
}

.music-icon::before {
  content: "â™ª";
  font-size: 30px;
  color: white;
  font-weight: bold;
}

.hint-text {
  font-size: 15px;
  color: #666;
  line-height: 1.5;
}

/* æ—¶é—´è½´æ ·å¼ */
.timeline {
  position: relative;
  max-width: 400px;
  margin: 0 auto;
}

.timeline::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 0;
  bottom: 0;
  width: 3px;
  background: linear-gradient(to bottom, #ff7eb3, #4facfe);
  transform: translateX(-50%);
  opacity: 0.5;
}

.timeline-item {
  position: relative;
  margin-bottom: 40px;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.8s ease;
}

.timeline-item.visible {
  opacity: 1;
  transform: translateY(0);
}

.timeline-item:nth-child(odd) {
  padding-right: calc(50% + 20px);
  padding-left: 0;
  text-align: right;
}

.timeline-item:nth-child(even) {
  padding-left: calc(50% + 20px);
  padding-right: 0;
  text-align: left;
}

.timeline-date {
  display: inline-block;
  background: linear-gradient(135deg, #ff7eb3, #ff758c);
  color: white;
  padding: 6px 15px;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 10px;
  box-shadow: 0 4px 12px rgba(255, 117, 140, 0.3);
}

.timeline-content {
  background: white;
  padding: 20px;
  border-radius: 15px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
  position: relative;
  min-height: 200px;
  display: flex;
  flex-direction: column;
}

.timeline-item:nth-child(odd) .timeline-content::before {
  content: '';
  position: absolute;
  right: -10px;
  top: 20px;
  width: 0;
  height: 0;
  border-top: 10px solid transparent;
  border-bottom: 10px solid transparent;
  border-left: 10px solid white;
}

.timeline-item:nth-child(even) .timeline-content::before {
  content: '';
  position: absolute;
  left: -10px;
  top: 20px;
  width: 0;
  height: 0;
  border-top: 10px solid transparent;
  border-bottom: 10px solid transparent;
  border-right: 10px solid white;
}

.timeline-circle {
  position: absolute;
  left: 50%;
  top: 0;
  width: 20px;
  height: 20px;
  background: white;
  border: 3px solid #ff7eb3;
  border-radius: 50%;
  transform: translateX(-50%);
  z-index: 2;
  box-shadow: 0 0 0 5px rgba(255, 126, 179, 0.2);
}

.timeline-image {
  width: 100%;
  height: 120px;
  border-radius: 10px;
  overflow: hidden;
  margin-bottom: 15px;
  background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.timeline-image::before {
  content: '';
  position: absolute;
  width: 80%;
  height: 4px;
  background: rgba(255, 255, 255, 0.8);
  border-radius: 2px;
}

.timeline-image::after {
  content: '';
  position: absolute;
  width: 4px;
  height: 80%;
  background: rgba(255, 255, 255, 0.8);
  border-radius: 2px;
}

.timeline-text {
  font-size: 14px;
  line-height: 1.6;
  color: #555;
  flex-grow: 1;
}

.timeline-place {
  font-size: 13px;
  color: #888;
  margin-top: 8px;
  font-style: italic;
}

/* éŸ³ä¹æ’­æ”¾å™¨ */
.music-player {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  max-width: 350px;
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 15px;
  padding: 15px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
  display: none;
  z-index: 1000;
}

.music-player.active {
  display: block;
  animation: slideUp 0.5s ease;
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translate(-50%, 20px);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

.player-controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.player-info {
  flex-grow: 1;
  padding-left: 15px;
}

.music-title {
  font-size: 16px;
  font-weight: 600;
  color: #333;
}

.music-artist {
  font-size: 13px;
  color: #888;
}

.play-btn {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, #ff7eb3, #ff758c);
  border: none;
  color: white;
  font-size: 18px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
}

.play-btn:hover {
  transform: scale(1.1);
}

/* è¿›åº¦æ¡ */
.progress-bar {
  width: 100%;
  height: 4px;
  background: #eee;
  border-radius: 2px;
  overflow: hidden;
  margin-top: 8px;
}

.progress {
  width: 0%;
  height: 100%;
  background: linear-gradient(to right, #ff7eb3, #4facfe);
  transition: width 0.1s linear;
}

/* å¯¼èˆªæŒ‰é’® */
.back-btn {
  position: fixed;
  top: 20px;
  left: 15px;
  width: 40px;
  height: 40px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  color: #ff7eb3;
  font-size: 20px;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
  z-index: 1000;
  transition: all 0.3s ease;
}

.back-btn:hover {
  transform: scale(1.1);
  background: white;
}

/* åŠ è½½æŒ‡ç¤ºå™¨ */
.loader {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.95);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  transition: opacity 0.5s ease;
}

.loader.hidden {
  opacity: 0;
  pointer-events: none;
}

.loader-text {
  font-size: 18px;
  color: #ff7eb3;
  font-weight: 600;
  margin-bottom: 20px;
}

.loader-dots {
  display: flex;
  gap: 8px;
}

.loader-dot {
  width: 12px;
  height: 12px;
  background: #ff7eb3;
  border-radius: 50%;
  animation: bounce 1.4s infinite ease-in-out both;
}

.loader-dot:nth-child(1) { animation-delay: -0.32s; }
.loader-dot:nth-child(2) { animation-delay: -0.16s; }

@keyframes bounce {
  0%, 80%, 100% { transform: scale(0); }
  40% { transform: scale(1); }
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 480px) {
  .container {
    padding: 15px 12px 70px;
  }
  
  .main-title {
    font-size: 24px;
  }
  
  .timeline-item:nth-child(odd),
  .timeline-item:nth-child(even) {
    padding-right: 0;
    padding-left: 40px;
    text-align: left;
  }
  
  .timeline::before {
    left: 20px;
  }
  
  .timeline-circle {
    left: 20px;
  }
  
  .timeline-item:nth-child(odd) .timeline-content::before,
  .timeline-item:nth-child(even) .timeline-content::before {
    left: -10px;
    right: auto;
    border-right: 10px solid white;
    border-left: none;
  }
  
  .music-hint {
    margin: 20px auto;
  }
}
</style>
</head>
<body>
<!-- åŠ è½½åŠ¨ç”» -->
<div class="loader" id="loader">
  <div style="text-align: center;">
    <div class="loader-text">æ­£åœ¨å‡†å¤‡å›å¿†...</div>
    <div class="loader-dots">
      <div class="loader-dot"></div>
      <div class="loader-dot"></div>
      <div class="loader-dot"></div>
    </div>
  </div>
</div>

<!-- è¿”å›æŒ‰é’® -->
<a href="index.html" class="back-btn">â†</a>

<div class="container">
  <!-- æ ‡é¢˜ -->
  <div class="header">
    <h1 class="main-title">æ—¶å…‰å›å¿†å½•</h1>
    <p class="sub-title">è®°å½•æ¯ä¸€ä¸ªæ¸©æš–çš„ç¬é—´</p>
  </div>

  <!-- éŸ³ä¹æç¤ºåŒºåŸŸ -->
  <div class="music-hint">
    <div class="music-icon" id="musicHint"></div>
    <p class="hint-text">ç‚¹å‡»ä¸Šæ–¹å›¾æ ‡æ’­æ”¾éŸ³ä¹<br>è®©å›å¿†æ›´åŠ ç¾å¥½~</p>
  </div>

  <!-- æ—¶é—´è½´ -->
  <div class="timeline" id="timeline">
    <!-- æ—¶é—´è½´é¡¹ç›®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
  </div>
</div>

<!-- éŸ³ä¹æ’­æ”¾å™¨ -->
<div class="music-player" id="musicPlayer">
  <div class="player-controls">
    <button class="play-btn" id="playBtn">â–¶</button>
    <div class="player-info">
      <div class="music-title">æœ€ç¾çš„æœŸå¾…</div>
      <div class="music-artist">å‘¨ç¬”ç•…</div>
    </div>
  </div>
  <div class="progress-bar">
    <div class="progress" id="progress"></div>
  </div>
</div>

<script>
// å›å¿†æ•°æ® - ä½ å¯ä»¥æ›¿æ¢æˆçœŸå®çš„å›å¿†
const memories = [
  {
    date: "2023.01.15",
    title: "ç¬¬ä¸€æ¬¡ç›¸é‡",
    text: "è¿˜è®°å¾—é‚£å¤©é˜³å…‰æ­£å¥½ï¼Œä½ ç©¿ç€ç™½è‰²çš„è£™å­ï¼Œç¬‘å¾—ç‰¹åˆ«ç”œã€‚æˆ‘ä»¬èŠäº†å¾ˆä¹…ï¼Œå‘ç°å½¼æ­¤æœ‰é‚£ä¹ˆå¤šå…±åŒè¯é¢˜ã€‚",
    place: "æ˜Ÿå·´å…‹å’–å•¡é¦†"
  },
  {
    date: "2023.03.20",
    title: "ç¬¬ä¸€æ¬¡çº¦ä¼š",
    text: "æˆ‘ä»¬å»äº†æµ·æ´‹å…¬å›­ï¼Œä½ åƒå°å­©å­ä¸€æ ·å…´å¥‹åœ°çœ‹ç€æµ·è±šè¡¨æ¼”ã€‚ä½ æ‰‹ä¸Šçš„å†°æ·‡æ·‹èåŒ–äº†ï¼Œæ»´åœ¨äº†æˆ‘çš„è¡¬è¡«ä¸Šã€‚",
    place: "æµ·æ´‹å…¬å›­"
  },
  {
    date: "2023.05.01",
    title: "ç¬¬ä¸€æ¬¡æ—…è¡Œ",
    text: "ä¸‰å¤©ä¸¤å¤œçš„çŸ­é€”æ—…è¡Œï¼Œæˆ‘ä»¬ä¸€èµ·çˆ¬å±±çœ‹æ—¥å‡ºã€‚è™½ç„¶å¾ˆç´¯ï¼Œä½†å±±é¡¶çš„é£æ™¯å’Œä½ çš„ç¬‘å®¹è®©ä¸€åˆ‡éƒ½å€¼å¾—ã€‚",
    place: "é»„å±±"
  },
  {
    date: "2023.07.12",
    title: "ä½ çš„ç”Ÿæ—¥",
    text: "å·å·å‡†å¤‡äº†ä¸€ä¸ªæœˆçš„æƒŠå–œæ´¾å¯¹ï¼Œä½ çœ‹åˆ°æœ‹å‹ä»¬éƒ½æ¥äº†ï¼Œæ„ŸåŠ¨å¾—çœ¼çœ¶çº¢çº¢çš„ã€‚é‚£å¤©ä½ è®¸çš„æ„¿æœ›ï¼Œå¸Œæœ›æœ‰æˆ‘ã€‚",
    place: "ä½ å®¶"
  },
  {
    date: "2023.09.08",
    title: "é›¨ä¸­æ¼«æ­¥",
    text: "çªç„¶ä¸‹èµ·å¤§é›¨ï¼Œæˆ‘ä»¬æ²¡æœ‰å¸¦ä¼ã€‚ä½ è¯´æ²¡å…³ç³»ï¼Œåœ¨é›¨ä¸­å¥”è·‘çš„æ„Ÿè§‰å¾ˆè‡ªç”±ã€‚åæ¥ä¸¤ä¸ªäººéƒ½æ„Ÿå†’äº†ï¼Œå´è§‰å¾—å¾ˆå¹¸ç¦ã€‚",
    place: "æ ¡å›­å°é“"
  },
  {
    date: "2023.11.11",
    title: "å…‰æ£èŠ‚",
    text: "ä½ è¯´è¿™æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªéå•èº«å…‰æ£èŠ‚ï¼Œæˆ‘ä»¬ä¸€èµ·åšäº†é¡¿å¤§é¤ã€‚è™½ç„¶å‘³é“ä¸æ€ä¹ˆæ ·ï¼Œä½†ä¸€èµ·åšé¥­çš„è¿‡ç¨‹ç‰¹åˆ«æ¸©é¦¨ã€‚",
    place: "æˆ‘çš„å°å¨æˆ¿"
  },
  {
    date: "2024.01.01",
    title: "æ–°å¹´ç¬¬ä¸€ç¼•é˜³å…‰",
    text: "æˆ‘ä»¬ç†¬å¤œåˆ°å‡Œæ™¨ï¼Œä¸€èµ·ç­‰å¾…æ–°å¹´çš„ç¬¬ä¸€ç¼•é˜³å…‰ã€‚ä½ å¯¹æˆ‘è¯´ï¼šæ–°å¹´å¿«ä¹ï¼Œå¸Œæœ›ä»¥åçš„æ¯ä¸€å¹´éƒ½èƒ½ä¸€èµ·çœ‹æ—¥å‡ºã€‚",
    place: "æµ·è¾¹"
  },
  {
    date: "2024.02.14",
    title: "ç¬¬ä¸€ä¸ªæƒ…äººèŠ‚",
    text: "æˆ‘é€äº†ä½ ä¸€æŸäº²æ‰‹æŠ˜çš„çº¸ç«ç‘°ï¼Œä½ ç¬‘æˆ‘æ‰‹ç¬¨ï¼Œå´å°å¿ƒç¿¼ç¿¼åœ°æ”¶å¥½ã€‚ä½ è¯´è¿™æ˜¯ä½ æ”¶åˆ°çš„æœ€ç‰¹åˆ«çš„ç¤¼ç‰©ã€‚",
    place: "è¥¿é¤å…"
  }
];

// DOMå…ƒç´ 
const timeline = document.getElementById('timeline');
const musicHint = document.getElementById('musicHint');
const musicPlayer = document.getElementById('musicPlayer');
const playBtn = document.getElementById('playBtn');
const progress = document.getElementById('progress');
const loader = document.getElementById('loader');

// éŸ³ä¹
const music = new Audio();
music.src = "æœ€ç¾çš„æœŸå¾… - å‘¨ç¬”ç•….mp3"; // è¯·ç¡®ä¿æœ‰è¿™ä¸ªéŸ³ä¹æ–‡ä»¶
music.preload = 'metadata';

let isPlaying = false;
let currentMemoryIndex = 0;

// åˆå§‹åŒ–æ—¶é—´è½´
function initTimeline() {
  timeline.innerHTML = '';
  
  memories.forEach((memory, index) => {
    const item = document.createElement('div');
    item.className = 'timeline-item';
    item.style.animationDelay = `${index * 0.2}s`;
    
    item.innerHTML = `
      <div class="timeline-circle"></div>
      <div class="timeline-date">${memory.date}</div>
      <div class="timeline-content">
        <div class="timeline-image"></div>
        <div class="timeline-text">
          <strong>${memory.title}</strong><br>
          ${memory.text}
        </div>
        <div class="timeline-place">ğŸ“ ${memory.place}</div>
      </div>
    `;
    
    timeline.appendChild(item);
  });
}

// æ»šåŠ¨æ˜¾ç¤ºå›å¿†
function showMemoriesOnScroll() {
  const items = document.querySelectorAll('.timeline-item');
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
        currentMemoryIndex = Array.from(items).indexOf(entry.target);
        
        // å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªæ˜¾ç¤ºçš„ï¼Œè‡ªåŠ¨æ’­æ”¾éŸ³ä¹
        if (currentMemoryIndex === 0 && !isPlaying) {
          setTimeout(() => {
            playMusic();
          }, 500);
        }
      }
    });
  }, {
    threshold: 0.2,
    rootMargin: '0px 0px -50px 0px'
  });
  
  items.forEach(item => observer.observe(item));
}

// éŸ³ä¹æ§åˆ¶
function playMusic() {
  if (isPlaying) {
    music.pause();
    playBtn.textContent = 'â–¶';
    musicPlayer.classList.remove('active');
  } else {
    music.play().catch(e => {
      console.log('éŸ³ä¹æ’­æ”¾å¤±è´¥:', e);
      alert('è¯·ç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®åï¼Œå†ç‚¹å‡»éŸ³ä¹å›¾æ ‡æ’­æ”¾');
    });
    playBtn.textContent = 'â¸';
    musicPlayer.classList.add('active');
  }
  isPlaying = !isPlaying;
}

// æ›´æ–°è¿›åº¦æ¡
function updateProgress() {
  const percent = (music.currentTime / music.duration) * 100 || 0;
  progress.style.width = `${percent}%`;
}

// é¡µé¢åˆå§‹åŒ–
function init() {
  // åŠ è½½å®Œæˆåéšè—åŠ è½½åŠ¨ç”»
  setTimeout(() => {
    loader.classList.add('hidden');
    setTimeout(() => {
      loader.style.display = 'none';
    }, 500);
  }, 1000);
  
  initTimeline();
  
  // åˆå§‹åŒ–æ»šåŠ¨ç›‘å¬
  setTimeout(showMemoriesOnScroll, 300);
  
  // éŸ³ä¹æç¤ºç‚¹å‡»äº‹ä»¶
  musicHint.addEventListener('click', () => {
    if (!isPlaying) {
      playMusic();
    }
    musicPlayer.classList.add('active');
  });
  
  // æ’­æ”¾æŒ‰é’®äº‹ä»¶
  playBtn.addEventListener('click', playMusic);
  
  // éŸ³ä¹äº‹ä»¶ç›‘å¬
  music.addEventListener('timeupdate', updateProgress);
  music.addEventListener('ended', () => {
    music.currentTime = 0;
    music.play();
  });
  
  // ç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®ä¹Ÿå¯æ’­æ”¾ï¼ˆè§£å†³ç§»åŠ¨ç«¯è‡ªåŠ¨æ’­æ”¾é™åˆ¶ï¼‰
  document.body.addEventListener('click', () => {
    if (music.paused && !isPlaying) {
      // ç¬¬ä¸€æ¬¡äº¤äº’æ—¶é¢„åŠ è½½
      music.load();
    }
  }, { once: true });
  
  // è§¦æ‘¸äº‹ä»¶æ”¯æŒ
  musicHint.addEventListener('touchend', (e) => {
    e.preventDefault();
    if (!isPlaying) {
      playMusic();
    }
    musicPlayer.classList.add('active');
  });
  
  // è¿”å›æŒ‰é’®è§¦æ‘¸åé¦ˆ
  document.querySelector('.back-btn').addEventListener('touchend', (e) => {
    e.preventDefault();
    window.location.href = 'index.html';
  });
}

// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', init);

// ç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½
window.addEventListener('load', () => {
  // å†æ¬¡ç¡®è®¤æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆ
});
</script>
</body>
</html>